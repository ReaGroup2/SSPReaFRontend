<app-admin></app-admin>
<button  class="btn btn-warning"(click)="openAddModal()" class="btn btn-sm bg-success text-white ml-2 addButton">Ekle</button>
<br><br>
<div class="contentAdmin container" style="position: relative;">
  <table class="table table-striped table-centered mb-0">
    <thead>
      <tr>
        <th>Id</th>
        <th>Kategori</th>
        <th>Resim</th>
        <th>Başlık</th>
        <th>Tanım</th>
        <th>Başlangıç Tarihi</th>
        <th>Bitiş Tarihi</th>
        <th>Durum</th>
        <th>OrganizatorId</th>
        <th>OrganizatorName</th>
        <th>Limit</th>
        <th>Action</th>

      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of events">
        <td>{{ item.id }}</td>
        <td>{{ item.category!.categoryName}}</td>
        <td>{{item.imagePath}}</td>
        <td>{{item.title}}</td>
        <td>
          <p>{{ item.description?.substring(0,30) }}...</p>
        </td>
        <td>{{ item.startDate }}</td>
        <td>{{ item.finishDate }}</td>
        <td>{{ item.isActive }}</td>
        <td>{{ item.creator?.id }}</td>
        <td>{{ item.creator?.fullName }}</td>
        <td>{{ item.limit }}</td>

        <td style="display: flex;">
          <a href="javascript: void(0);" (click)="confirmDelete(item.id)" class="btn btn-sm bg-danger text-white">delete</a>
          <a href="javascript: void(0);" class="btn btn-sm bg-warning text-white ml-2"
            (click)="openModal(item)">edit</a>
          
        </td>

      </tr>
    </tbody>
  </table>
</div>
<div class="modal-container" *ngIf="showModal">
  <div class="modal-content">
    <h2>Kullanıcı Bilgileri Formu</h2>
    <div>
      <form>
        <div class="row">
          <div class="col-md-6 col-sm-12">
            <div *ngIf="selectedCategory != 0" class="form-group">
              <label>Id:</label>
              <input readonly [(ngModel)]="selectedEditEvent!.id" [ngModelOptions]="{standalone: true}" type="email"
                class="form-control" required>
            </div>
            <div class="form-group">
              <label>Kategori:</label>
              <div>
                <select class="form-control" id="selectCategory" [value]="selectedCategory" (change)="selectCategoryOnModal()">
                  
                  <option value="0" >Kategori Seçiniz</option>
                  <option *ngFor="let item of categories"  value="{{item.id}}">{{item.categoryName}}</option>
                  
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Event Başlık:</label>
              <input [(ngModel)]="selectedEditEvent!.title" [ngModelOptions]="{standalone: true}" type="text"
                class="form-control" required>
            </div>
            <div class="form-group">
              <label>Event Açıklama:</label>
              <input [(ngModel)]="selectedEditEvent!.description" [ngModelOptions]="{standalone: true}" type="text"
                class="form-control" required>
            </div>
            <div class="form-group">
              <label>Aktiflik:</label>
              <input [(ngModel)]="selectedEditEvent!.isActive" [ngModelOptions]="{standalone: true}" type="checkbox"
                class="form-control" required>
            </div>

          </div>
          <div class="col-md-6 col-sm-12">
            <div class="form-group">
              <label>Event Başlangıç Tarihi:</label>
              <input [(ngModel)]="selectedEditEvent!.startDate" [ngModelOptions]="{standalone: true}" type="datetime"
                class="form-control" required>
            </div>
            <div class="form-group">
              <label>Event Bitiş Tarihi:</label>
              <input [(ngModel)]="selectedEditEvent!.finishDate" [ngModelOptions]="{standalone: true}" type="datetime"
                class="form-control" required>
            </div>
            <div class="form-group">
              <label>Limit:</label>
              <input [(ngModel)]="selectedEditEvent!.limit" [ngModelOptions]="{standalone: true}" type="number"
                class="form-control" required>
            </div>

          </div>
        </div>
        <br><br>



        <button (click)="updateEvent()" class="btn btn-primary">Güncelle</button>
      </form>
    </div>
    <!-- Kullanıcı bilgileri formu burada yer alabilir -->
    <button (click)="closeModal()">Kapat</button>
      
  </div>
</div>